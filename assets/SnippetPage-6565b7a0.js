import{d as C,h as N,c as r,a as e,g as i,n as m,j as g,v as _,b as c,u as v,p as f,o as l,_ as w}from"./index-c786b721.js";import{A as P,D as h,G as T}from"./GameController-cdff8749.js";import{u as k,a as B,c as F,b as S}from"./useGameJSONResolver-be0544a5.js";const x={class:"snippet-page-container"},G={key:1,class:"container-page-tab"},D={class:"container-agv"},J={class:"container-editor"},O={key:2,class:"container-download"},A=C({__name:"SnippetPage",props:{gameJsonUri:{},name:{},autoplay:{type:Boolean,default:!1},showDownloadButton:{type:Boolean,default:!0},showTab:{type:Boolean,default:!0}},setup(y){const n=y,a=k(),d=B();f(F,a),f(S,d);const s=N({currentPageTabName:"code",ready:n.autoplay,processingAsZip:!1}),p=async()=>{await a.fetchPseudoFilesFromUri(n.gameJsonUri);const o=a.pseudoFiles.find(({assetType:t})=>t==="game.json");d.run(a.generateGameJSON(o&&o.editorType==="text"?JSON.parse(o.value):void 0),a.pseudoFiles,a.assetBase),s.currentPageTabName="game",s.ready=!0},u=o=>{s.currentPageTabName=o};return n.autoplay&&p().catch(o=>console.error(o)),(o,t)=>(l(),r("div",x,[s.ready?i("",!0):(l(),r("div",{key:0,class:"container-overlay pointer",onClick:p},t[2]||(t[2]=[e("span",{class:"text"},"コードを実行",-1),e("span",{class:"icon"},[e("i",{class:"material-icons md-120"},"play_arrow")],-1)]))),n.showTab?(l(),r("div",G,[e("ul",null,[e("li",{class:m(["page-tab",{active:s.currentPageTabName==="code"}])},[e("a",{onClick:t[0]||(t[0]=b=>u("code"))},"CODE")],2),e("li",{class:m(["page-tab",{active:s.currentPageTabName==="game"}])},[e("a",{onClick:t[1]||(t[1]=b=>u("game"))},"GAME")],2)])])):i("",!0),g(e("div",D,[c(T,{ref:"gameContollerRef"},null,512)],512),[[_,s.currentPageTabName==="game"]]),g(e("div",J,[c(P,{pseudoFiles:v(a).pseudoFiles},null,8,["pseudoFiles"])],512),[[_,s.currentPageTabName==="code"]]),n.showDownloadButton?(l(),r("div",O,[c(h,{pseudoFiles:v(a).pseudoFiles,name:n.name+"."+Date.now()},null,8,["pseudoFiles","name"])])):i("",!0)]))}});const V=w(A,[["__scopeId","data-v-5948931f"],["__file","SnippetPage.vue"]]);export{V as default};
